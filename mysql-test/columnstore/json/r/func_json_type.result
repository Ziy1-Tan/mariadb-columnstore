DROP DATABASE IF EXISTS json_type_db;
CREATE DATABASE json_type_db;
USE json_type_db;
# ----------------------------------------------------------------------
# Test of JSON_TYPE function.
# ----------------------------------------------------------------------
CREATE TABLE t1(l LONGTEXT) ENGINE = columnstore;
# Error ER_INVALID_JSON_TEXT_IN_PARAM
INSERT INTO t1 VALUES('abc');
SELECT JSON_TYPE(l) FROM t1;
JSON_TYPE(l)
NULL
# String literal - valid JSON
TRUNCATE t1;
INSERT INTO t1 values('{"a": 2}');
INSERT INTO t1 values('[1,2]');
INSERT INTO t1 values('"scalar string"');
INSERT INTO t1 values('true');
INSERT INTO t1 values('false');
INSERT INTO t1 values('null');
INSERT INTO t1 values('1');
INSERT INTO t1 values('-0');
INSERT INTO t1 values('-0.0');
SELECT JSON_TYPE(l) FROM t1;
JSON_TYPE(l)
OBJECT
ARRAY
STRING
BOOLEAN
BOOLEAN
NULL
INTEGER
INTEGER
DOUBLE
DROP TABLE t1;
DROP DATABASE json_type_db;
